{% extends "base.html"%}

{% block title %}Search{% endblock %}

{% block content %}
<div class="info-page-container">
    <div class="home-section" id="home-search">
        <div class="input-container">
            <h3>Sök igenom vår databas genom att söka på en frukt eller grönsak!</h3>
            <form action="/search" method="GET">
                <input type="search" placeholder="Sök på t.ex tomat, gurka..." name="search">
                <button><i class="fa-solid fa-magnifying-glass"></i></button>
            </form>
        </div>
        {% if results %}
            <section class="search-section">          
                <article class="info-article">
                    <h1>{{ query_name }}</h1>
                    {% if img %}
                    <img src="{{ img }}">
                    {% elif api_image %}
                    <img src="{{ api_image }}">
                    {% endif %}
                    <div class="api-info">
                        <p><strong>Fakta: </strong>{{ fact }}</p>
                    </div>
                </article>
                <article class="table-article">
                    <div class="table-container">
                        <div class="container-search">
                            <div class="nutrition-info">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Vitamin/Mineral</th>
                                            <th>per 100g</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for nutrient, values in results.items() %}
                                            <tr>
                                                <td>{{ nutrient }}</td>
                                                <td>
                                                    {% for value in values %}
                                                        {% if nutrient in ["Jod", "Selen", "Vitamin A", "Vitamin D", "Folat", "Vitamin K"] %}
                                                            {{ value }}<span style="font-size: 0.9em; padding-left: 2px;">&micro;g</span>
                                                        {% else %}
                                                            {{ value }}<span style="font-size: 0.9em; padding-left: 2px;">mg</span>
                                                        {% endif %}
                                                    {% endfor %}
                                                </td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </article>
            </section>
        {% elif message %}
            <div id="default-section">       
                <h2>{{ message }}</h2>            
            </div>
        {% endif %}
        {% if not results and not message %}
            <div id="default-section">
                <h2>Sökfunktionen</h2>
                <p>Genom att använda sökrutan kan du snabbt och enkelt få mer detaljerad information om frukt och grönt från vår omfattande databas. Skriv in namnet på den frukt eller grönsak du är intresserad av, och du kommer att få tillgång till detaljerade fakta, näringsvärden.</p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}